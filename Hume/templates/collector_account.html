{% extends "base.html" %}
{% load static %}


{% block navigation-bar %}
  <ul class="js-clone-nav d-none d-lg-inline-block site-menu">
    <li><a href="{% url 'home' %}">Home</a></li>
    <li class="has-children">
      <a href="#">DataLab</a>
      <ul class="dropdown">
        <li><a href="{% url 'rain-pattern' %}">Rain Pattern</a></li>
        {% comment %} <li class="has-children">
          <a href="#">Menu Two</a>
          <ul class="dropdown">
            <li><a href="#">Sub Menu One</a></li>
            <li><a href="#">Sub Menu Two</a></li>
            <li><a href="#">Sub Menu Three</a></li>
          </ul>
        </li> {% endcomment %}
        <li><a href="{% url 'temp-pattern' %}">Temperature</a></li>
      </ul>
    </li>
    <li><a href="{% url 'live-weather' %}">Live Weather</a></li>
    <li><a href="{% url 'news' %}">News</a></li>
    <li><a href="{% url 'gallery' %}">Gallery</a></li>
    <li><a href="{% url 'about' %}">About</a></li>
    <li><a href="{% url 'contact' %}">Contact</a></li>
  </ul>
{% endblock navigation-bar %}


{% block content %}

  <div class="untree_co-hero overlay" style="background-image: url('{% static 'images/liveweather.webp' %}');">
    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-12">
          <div class="row justify-content-center ">
            <div class="col-lg-6 text-center ">
              <h1 class="mb-4 heading text-white" data-aos="fade-up" data-aos-delay="100">Welcome {{user.name}}</h1>
              <div class="mb-5 text-white desc mx-auto" data-aos="fade-up" data-aos-delay="200">
                <p>Here you can manage your account and track your amazing contributions to a brighter future.</p>
              </div>

              <p class="mb-0" data-aos="fade-up" data-aos-delay="300"><a href="#" class="btn btn-secondary">Explore courses</a></p>

            </div>

          </div>

        </div>

      </div> <!-- /.row -->
    </div> <!-- /.container -->

  </div> <!-- /.untree_co-hero -->


  <div class="untree_co-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
            <div class="custom-block" data-aos="fade-up" data-aos-delay="100">
                <h2 class="section-title">Account</h2>
                <form class="contact-form" action="{% url 'edit-account' %}" method="POST">
                  {% csrf_token %}
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="" for="fname">Name</label>
                        <input type="text" class="form-control" name="name" id="fname" value="{{user.name}}">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label class="" for="lname">Mobile number</label>
                        <input type="text" class="form-control" id="lname" name="mobile_number" value="{{user.mobile_number}}">
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="" for="email">Email address</label>
                    <input type="email" class="form-control" id="email" name="email" aria-describedby="emailHelp" value="{{user.email}}">
                  </div>
                  <button type="submit" class="btn btn-primary">edit</button>
                </form>
              </div>

          <div class="custom-block" data-aos="fade-up">
            <h2 class="section-title">Gallery</h2>
            <div class="row gutter-v2 gallery">
              <div class="col-4">
                <a href="{% static 'images/gal_1.jpg' %}" class="gal-item" data-fancybox="gal"><img src="{% static 'images/gal_1.jpg' %}" alt="Image" class="img-fluid"></a>
              </div>
              <div class="col-4">
                <a href="{% static 'images/gal_2.jpg' %}" class="gal-item" data-fancybox="gal"><img src="{% static 'images/gal_2.jpg' %}" alt="Image" class="img-fluid"></a>
              </div>
              <div class="col-4">
                <a href="{% static 'images/gal_3.jpg' %}" class="gal-item" data-fancybox="gal"><img src="{% static 'images/gal_3.jpg' %}" alt="Image" class="img-fluid"></a>
              </div>
              <div class="col-4">
                <a href="{% static 'images/gal_4.jpg' %}" class="gal-item" data-fancybox="gal"><img src="{% static 'images/gal_4.jpg' %}" alt="Image" class="img-fluid"></a>
              </div>
              <div class="col-4">
                <a href="{% static 'images/gal_5.jpg' %}" class="gal-item" data-fancybox="gal"><img src="{% static 'images/gal_5.jpg' %}" alt="Image" class="img-fluid"></a>
              </div>
              <div class="col-4">
                <a href="{% static 'images/gal_6.jpg' %}" class="gal-item" data-fancybox="gal"><img src="{% static 'images/gal_6.jpg' %}" alt="Image" class="img-fluid"></a>
              </div>
            </div>
          </div> <!-- END .custom-block -->

          <div class="custom-block" data-aos="fade-up">
            <h2 class="section-title">Video</h2>

            <a href="https://vimeo.com/342333493" data-fancybox class="video-wrap">
              <span class="play-wrap"><span class="icon-play"></span></span>
              <img src="{% static 'images/hero_bg.jpg' %}" alt="Image" class="img-fluid rounded">
            </a>
          </div> <!-- END .custom-block -->

          <div class="custom-block" data-aos="fade-up">
            <h2 class="section-title mb-3">Check Unordered List</h2>

            <ul class="list-unstyled ul-check primary">
              <li>Far far away, behind the word</li>
              <li>Far from the countries Vokalia</li>
              <li>Separated they live in Bookmarksgrove</li>
            </ul>

          </div> <!-- END .custom-block -->

        </div> <!-- /.col-lg-6 -->
        <div class="col-lg-6">
            <div class="custom-block" data-aos="fade-up">
                <h2 class="section-title">Data contributions</h2>
                <div class="custom-accordion mt-5" id="accordion_1">

                  <div class="row count-numbers mb-5">
                    <div class="col-6 col-lg-6" data-aos="fade-up" data-aos-delay="0">
                      <span class="counter d-block"><span>&#x1F4CA; </span><span data-number="{{data.total_collected}}">0</span><span>+</span></span>
                      <span class="caption-2">Total Data Collected</span>
                    </div>
                    <div class="col-6 col-lg-6" data-aos="fade-up" data-aos-delay="100">
                      <span class="counter d-block"><span>&#x1F4C6; </span><span data-number="{{data.collected_this_month}}">0</span><span>+</span></span>
                      <span class="caption-2">This month</span>
                    </div>
                  </div>

                  <div class="row count-numbers">
                    <div class="col-6 col-lg-6" data-aos="fade-up" data-aos-delay="0">
                      
                      <span class="counter d-block"><span>&#x1F321; </span><span data-number="{{data.temp}}">0</span><span>Â°C</span></span>
                    </div>
                    <div class="col-6 col-lg-6" data-aos="fade-up" data-aos-delay="0">
                      
                      <span class="counter d-block"><span>&#x1F327; </span><span data-number="{{data.rain}}">0</span><span>Mm</span></span>
                    </div>
                  </div>
                  
                  <div class="accordion-item mt-4">
                    <h2 class="mb-0">
                      <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="False" aria-controls="collapseThree">Add Readings</button>
                    </h2>
                    
                    <div id="collapseThree" class="{% if not error and not form.errors %}collapse{% endif %}" aria-labelledby="headingThree" data-parent="#accordion_1">
                      <div class="accordion-body">

                        <form class="contact-form" action="{% url 'add-readings' %}" method="POST">
                          {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label class="" for="fname">Reading From</label>
                                    <input type="datetime-local" class="form-control", name="reading_from" id="fnameo">
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label class="" for="lname">Reading Till</label>
                                    <input type="datetime-local" class="form-control" id="fname2" name="reading_till" value="">
                                  </div>
                                </div>
                              </div>
                            <div class="row">
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label class="" for="fname">Rain reading</label>
                                  <input type="text" class="form-control" id="fname3" name="rain_reading" value="">
                                </div>
                              </div>
                              <div class="col-md-6">
                                <div class="form-group">
                                  <label class="" for="lname">Mesured in</label>
                                  <select id="select" name="rain_unit" class="custom-select">
                                    <option value="mm">MM</option>
                                    <option value="cm">CM</option>
                                  </select>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label class="" for="fname">Temperature reading</label>
                                    <input type="text" class="form-control" id="fname4" name="temp_reading">
                                  </div>
                                </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                    <label class="" for="lname">Mesured in</label>
                                    <select id="select" name="temp_unit" class="custom-select">
                                        <option value="Degree celsius">Degree celsius</option>
                                        <option value="Degree Fahrenheit">Degree Fahrenheit</option>
                                    </select>
                                  </div>
                                </div>
                              </div>
                              {% if form.errors %}
                                  <div style="color: red;">
                                    {{ form.errors }}
                                  </div>
                              {% endif %}
                              {% if error %}
                                  <div style="color: red;">
                                    {{ error }}
                                  </div>
                              {% endif %}
                            <button type="submit" class="btn btn-primary">Submit</button>
                          </form>

                      </div>
                      
                    </div>
    
                  </div> <!-- .accordion-item -->
    
                </div>
              </div> <!-- END .custom-block -->

          <div class="custom-block" data-aos="fade-up">
            <h2 class="section-title">Social Icons</h2>
            <ul class="list-unstyled social-icons light">
              <li><a href="#"><span class="icon-facebook"></span></a></li>
              <li><a href="#"><span class="icon-twitter"></span></a></li>
              <li><a href="#"><span class="icon-linkedin"></span></a></li>
              <li><a href="#"><span class="icon-google"></span></a></li>
              <li><a href="#"><span class="icon-play"></span></a></li>
            </ul>
          </div> <!-- END .custom-block -->

          <div class="custom-block" data-aos="fade-up" data-aos-delay="100">
            <h2 class="section-title text-center">Slider</h2>
            <div class="owl-single owl-carousel no-nav">
              <div class="testimonial mx-auto">
                <figure class="img-wrap">
                  <img src="{% static 'images/person_2.jpg' %}" alt="Image" class="img-fluid">
                </figure>
                <h3 class="name text-black">Adam Aderson</h3>
                <blockquote>
                  <p>&ldquo;There live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.&rdquo;</p>
                </blockquote>
              </div>

              <div class="testimonial mx-auto">
                <figure class="img-wrap">
                  <img src="{% static 'images/person_3.jpg' %}" alt="Image" class="img-fluid">
                </figure>
                <h3 class="name text-black">Lukas Devlin</h3>
                <blockquote>
                  <p>&ldquo;There live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.&rdquo;</p>
                </blockquote>
              </div>

              <div class="testimonial mx-auto">
                <figure class="img-wrap">
                  <img src="{% static 'images/person_4.jpg' %}" alt="Image" class="img-fluid">
                </figure>
                <h3 class="name text-black">Kayla Bryant</h3>
                <blockquote>
                  <p>&ldquo;There live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.&rdquo;</p>
                </blockquote>
              </div>

            </div>
          </div>
        </div> <!-- /.col-lg-6 -->
      </div> <!-- /.row -->    
    </div> <!-- /.container -->  
  </div> <!-- /.untree_co-section -->

  <script>
    document.addEventListener("DOMContentLoaded", function () {
        // yester day local time
        const ystrday = new Date()
        ystrday.setUTCDate(ystrday.getUTCDate() - 1)
        ystrday.setUTCHours(8, 0, 0, 0)
        const yester_day  = ystrday.toISOString().slice(0, 16)

        const today = new Date()
        today.setUTCDate(today.getUTCDate())
        today.setUTCHours(8, 0, 0, 0)
        const today_date  = today.toISOString().slice(0, 16)

        document.getElementById("fnameo").value = yester_day
        document.getElementById("fname2").value = today_date
    });
</script>
{% endblock content %}